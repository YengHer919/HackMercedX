<!DOCTYPE html>
<html>
<head>
    <title>Registration</title>
    <script>
        function validate() {
            let fail = "";
            fail += validateUsername($('username').value);
            fail += validateLast($('last').value);
            fail += validateFirst($('first').value);
            fail += validateEmail($('email').value);
            fail += validatePassword($('passwd').value);
            if (fail == "") return true;
            else {
                alert(fail);
                return false;
            }
        }

        function $(id) {
            return document.getElementById(id);
        }

        function validateUsername(field) {
            if (field == "") return "No Username was entered.\n";
            else if (/[^a-zA-Z0-9_-]/.test(field))
                return "Only a-z, A-Z, 0-9, - and _ allowed in Usernames.\n";
            return "";
        }

        function validateFirst(field) {
            if (field == "") return "No first name was entered.\n";
            else if (/[0-9]/.test(field))
                return "No 0-9 allowed in name's.\n";
            return "";
        }

        function validateLast(field) {
            if (field == "") return "No last name was entered.\n";
            else if (/[0-9]/.test(field))
                return "No 0-9 allowed in name's.\n";
            return "";
        }

        function validateEmail(field) {
            // Regular expression for validating emails
            let emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            
            if (field == "") return "No Email was entered.\n";
          
            else if (!emailRegex.test(field)){
                return "Invalid email format. Must be in the form 'example@domain.com'.\n";

            return "";
            }
            else if (/[^a-zA-Z0-9._@-]/.test(field))
                return "Invalid characters in Email.\n";
            return "";
        }

        function validatePassword(field) {
            if (field == "") return "No Password was entered.\n";
            else if (field.length < 6)
                return "Passwords must be at least 6 characters.\n";
            else if (!/[a-z]/.test(field) || !/[A-Z]/.test(field) || !/[0-9]/.test(field))
                return "Passwords require at least one lowercase and uppercase letter and at least one number.\n";
            return "";
        }
    </script>
</head>
<body>
    <h2>Registration</h2>
    <form onsubmit="return validate();">

        <label for="First Name">First Name:</label>
        <input type="text" id="first" name="username"><br>

        <label for="Last Name">Last Name:</label>
        <input type="text" id="last" name="last"><br>

        <label for="username">Username:</label>
        <input type="text" id="username" name="first"><br>
        
        <label for="email">Email:</label>
        <input type="text" id="email" name="email"><br>
        
        <label for="passwd">Password:</label>
        <input type="password" id="passwd" name="passwd"><br>
        
        <input type="submit" value="Submit">
    </form>
</body>
</html>
